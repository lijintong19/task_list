<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Add Issue</title>
    <link rel="stylesheet" type="text/css" th:href="@{/bulma/css/bulma.min.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/fontawesome-free-6.6.0-web/css/all.min.css}" />
</head>

<body>
    <section class="section">
        <div class="container">
            <h1 class="title has-text-centered">Add Issue</h1>
            <div class="box">
                <form th:action="@{/api/addIssue}" method="post" th:object="${issueRecords}"
                    enctype="multipart/form-data">
                    <div class="field">
                        <label class="label" for="issueDescription">Issue Description</label>
                        <div class="control">
                            <textarea id="issueDescription" class="textarea" th:field="*{issueDescription}"
                                required></textarea>
                        </div>
                    </div>

                    <div class="file is-info has-name" style="margin-top: 20px;">
                        <label class="file-label">
                            <input class="file-input" type="file" name="uploadFiles" id="uploadFiles" multiple />
                            <span class="file-cta">
                                <span class="file-icon">
                                    <i class="fas fa-upload"></i>
                                </span>
                                <span class="file-label">Related Info file… </span>
                            </span>
                            <span class="file-name" id="fileNameDisplay"> upload related files </span>
                        </label>
                    </div>

                    <div class="field">
                        <label class="label" for="issueDate">Issue Date</label>
                        <div class="control">
                            <input class="input" style="width: 150px;" type="date" id="issueDate"
                                th:field="*{issueDate}" required />
                        </div>
                    </div>

                    <div class="field">
                        <label class="label" for="issueStatus">Issue Status</label>
                        <div class="control">
                            <div class="select">
                                <select id="issueStatus" th:field="*{issueStatus}" style="width: 150px;" required>
                                    <option value="On going">On going</option>
                                    <option value="completed">Completed</option>
                                    <option value="empty"></option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="field">
                        <label class="label" for="reporter">Reporter</label>
                        <div class="select">
                            <select th:field="*{reportBy}" id="reportBy" style="width: 150px;">
                                <option value=""> </option>
                                <option value="陈坚">陈坚</option>
                                <option value="叶澍清">叶澍清</option>
                                <option value="恽华明">恽华明</option>
                                <option value="陈艳">陈艳</option>
                                <option value="魏丽">魏丽</option>
                                <option value="钱蓓">钱蓓</option>
                                <option value="顾小炀">顾小炀</option>
                                <option value="陆朝辉">陆朝辉</option>
                                <option value="程铭">程铭</option>
                                <option value="龙雨">龙雨</option>
                                <option value="王海龙">王海龙</option>
                                <option value="冯立">冯立</option>
                                <option value="徐晓梁">徐晓梁</option>
                                <option value="陈仕扬">陈仕扬</option>
                                <option value="陈晗博">陈晗博</option>
                                <option value="林镇鸿">林镇鸿</option>
                                <option value="李金铜">李金铜</option>
                                <option value="侯文迪">侯文迪</option>
                                <option value="项俊杰">项俊杰</option>
                            </select>
                        </div>
                    </div>
                    <div class="field">
                        <div class="control">
                            <button class="button is-primary" type="submit">Add</button>
                        </div>
                    </div>
            </div>
            </form>
        </div>
        </div>
    </section>
</body>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const fileInput = document.getElementById('uploadFiles');
        const fileNameDisplay = document.getElementById('fileNameDisplay');

        fileInput.addEventListener('change', function () {

            const files = fileInput.files;
            if (files.length > 0) {

                const fileNames = Array.from(files).map(file => file.name);

                fileNameDisplay.textContent = fileNames.join(', ');
            } else {

                fileNameDisplay.textContent = 'No files selected';
            }
        });
    });
</script>

</html>